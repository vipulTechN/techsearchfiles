const Name=document.getElementById("username"),Email=document.getElementById("useremail"),Phone=document.getElementById("userphone"),Message=document.getElementById("usermessage"),Propdetail=document.getElementById("Propdetail"),Form=document.getElementById("PropContactform"),SubmitButton=document.getElementById("contactsubmit"),csrftoken=document.querySelector("[name=csrfmiddlewaretoken]").value,Namevalid=document.getElementById("isnamevalid"),Nameinvalid=document.getElementById("isnameinvalid"),Emailvalid=document.getElementById("isemailvalid"),Emailinvalid=document.getElementById("isemailinvalid"),Phonevalid=document.getElementById("isphonevalid"),Phoneinvalid=document.getElementById("isphoneinvalid"),Messagevalid=document.getElementById("ismessagevalid"),Messageinvalid=document.getElementById("ismessageinvalid"),SuccessAlert=document.getElementById("issuccess"),FailureAlert=document.getElementById("isfailure");SuccessAlert.style.display="none",FailureAlert.style.display="none",Namevalid.style.display="none",Nameinvalid.style.display="none",Emailvalid.style.display="none",Emailinvalid.style.display="none",Phonevalid.style.display="none",Phoneinvalid.style.display="none",Messagevalid.style.display="none",Messageinvalid.style.display="none";let validName=!1,validEmail=!1,validPhone=!1,validMessage=!1;function Refresh(){setTimeout(()=>{location.reload()},2e4)}Name.addEventListener("blur",()=>{let e=Name.value;/^[a-z\sA-z]{3,30}$/.test(e)?(Namevalid.style.display="block",Nameinvalid.style.display="none",validName=!0):(Nameinvalid.style.display="block",Namevalid.style.display="none")}),Email.addEventListener("blur",()=>{let e=Email.value;/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)$/.test(e)?(Emailvalid.style.display="block",Emailinvalid.style.display="none",validEmail=!0):(Emailvalid.style.display="none",Emailinvalid.style.display="block")}),Phone.addEventListener("blur",()=>{let e=Phone.value;/^[0-9]{10}$/.test(e)?(Phonevalid.style.display="block",Phoneinvalid.style.display="none",validPhone=!0):(Phonevalid.style.display="none",Phoneinvalid.style.display="block")}),Message.addEventListener("blur",()=>{let e=Message.value;/[a-zA-Z]/.test(e)?(Messagevalid.style.display="block",Messageinvalid.style.display="none",validMessage=!0):(Messagevalid.style.display="none",Messageinvalid.style.display="block")}),SubmitButton.addEventListener("click",e=>{if(e.preventDefault(),validName&&validEmail&&validPhone&&validMessage){var l={Name:Name.value,Email:Email.value,Phone:Phone.value,Message:Message.value,Propdetail:Propdetail.value};const e={method:"POST",body:JSON.stringify(l),headers:{"content-Type":"application/json","X-CSRFToken":csrftoken}};fetch("/propertycontactdata/",e).then(e=>e.json()).then(e=>{1==e.success?(Form.reset(),SuccessAlert.style.display="block",FailureAlert.style.display="none",Refresh()):0==e.success&&(Form.reset(),FailureAlert.style.display="block",SuccessAlert.style.display="none",Refresh())}).catch(()=>{Form.reset(),FailureAlert.style.display="block",SuccessAlert.style.display="none",Refresh()})}else Form.reset(),FailureAlert.style.display="block",SuccessAlert.style.display="none",Refresh()});